<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <title>Prairie-ultima-iv-image-batch-processing by antoniotrkdz</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>Prairie-ultima-iv-image-batch-processing</h1>
        <h2>FIJI/ImageJ Macro for sorting batches of stack of images acquired with Praire Ultima IV two-photon microscopes.</h2>

        <section id="downloads">
          <a href="https://github.com/antoniotrkdz/Prairie-Ultima-IV-image-batch-processing/zipball/master" class="btn">Download as .zip</a>
          <a href="https://github.com/antoniotrkdz/Prairie-Ultima-IV-image-batch-processing/tarball/master" class="btn">Download as .tar.gz</a>
          <a href="https://github.com/antoniotrkdz/Prairie-Ultima-IV-image-batch-processing" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <h1>
<a id="prairie-ultima-iv-image-batch-processing" class="anchor" href="#prairie-ultima-iv-image-batch-processing" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Prairie-Ultima-IV-image-batch-processing</h1>

<h3>FIJI/ImageJ Macro for sorting batch of stack of images acquired from Praire Ultima IV two-photon microscopes.</h3>

<p>This macro sorts the stacks of images acquired with Praire Ultima IV systems into a set of data suitable to be visualised with TrackEM2 FIJI plugin.</p>

<h4>To use it simply copy the file into FIJI (or ImageJ) /macro subfolder and install it via the macro drop down menu option "install".</h4>

<p>This macro batch processes all the files in a folder and any subfolders in that folder. Use it to process a session/timepoint (_a, _b, etc.). It saves its output in two subfolders called "Processed_Max_Projections" and "Stitching_ready_tiffs" (divided into four zoom subfolders, 40x only). It gets the filename, x, y and z coordinates (together with some other values) from the .xml metadata file in the ROI subfolder and stores these values as a comma separated list text file named "CoordinatesZ(n).txt" in each zoom folder. It  saves the single plane images sequentially, makes the MAX projection, converts all to 8-bit and finally saves them. The dialog at the beginning sets wether to run the StackReg plugin to align the images in the stack and/or to filter them (Median filter pixel value 1). </p>

        <p>The <strong>version 5</strong> does not write the ROI number at the four corners leaving the images unaltered. Please refer to the "How to use Stitching macro.txt" file for a guide on how to use the output of this macro to get 3D mosaics.</p>

<p>The <strong>version 6</strong> also writes the zoom value and the ROI number at the four corners of the images ready to be stitched. Please note that it actually *draws* these information on the images, so in this extent it has to be considered a "destructive" macro.</p>

<p>Please refer to the <a href="how_to.html">"How to use Stitching macro.txt"</a> file for a guide on how to use the output of this macro to get 3D mosaics.</p>

<h2>Here is the code to be copy-pasted to your macro file(s):</h2>
  <a class="anchor" href="https://raw.githubusercontent.com/antoniotrkdz/Prairie-Ultima-IV-image-batch-processing/master/nostromo5.fiji.ijm" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span>v5 (no ROI numbers - images not altered)</a><br>
    <br>    
  <a class="anchor" href="https://raw.githubusercontent.com/antoniotrkdz/Prairie-Ultima-IV-image-batch-processing/master/nostromo6.fiji.ijm" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span>v6 (with ROI numbers - altered images)</a>


      </section>
    </div>


  </body>
</html>
